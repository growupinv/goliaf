import{d as L,u as N,r as g,c as u,a1 as q,o as A,g as y,m as w,w as s,h as r,e as a,f as t,ai as Q,t as _,s as p,q as h,a2 as U,b as $,aj as M,K as R,k as j,Z as K,x as O,aT as Z,O as G,N as H}from"./index-ff671c6d.js";/* empty css               *//* empty css            *//* empty css              *//* empty css              */import{useTreeStore as J}from"./treeStore-474ae5e3.js";import W from"./tree_cat_sub_products-fe3fe5e4.js";import X from"./FilterComponent-81a90014.js";import Y from"./SelectedProductsSummary-5cb2545f.js";const ee={class:"header-container"},te={class:"search-filter-row"},se={class:"drawer-content"},ae={key:0,class:"mb-2"},le={class:"button-row"},oe=r("span",null,"ДАЛЕЕ",-1),re=r("span",null,"СБРОСИТЬ",-1),ne={class:"dialog-footer"},ve=L({__name:"dbc_category_drawer",emits:["stage3"],setup(de,{emit:k}){const m=N(),e=J(),b=g(""),f=g(!1),n=g(!1),S=u(()=>{switch(e.skladFilter){case"мск":return"МСК";case"спб":return"СПБ";default:return"Все"}}),C=u(()=>{switch(e.skladFilter){case"мск":return"success";case"спб":return"warning";default:return"info"}}),F=u(()=>{switch(e.stockFilter){case!0:return"В наличии";case!1:return"В наличии";default:return"Все товары"}}),V=u(()=>{switch(e.stockFilter){case!0:return"success";case!1:return"danger";default:return"info"}}),P=()=>{const d=e.getSelectedProductIds;console.log("Selected product IDs:",d),n.value=!1,m.dbc_category_drawer=!1},x=()=>{e.totalSelectedProducts<e.filteredTreeData.length?e.selectAllFiltered():e.resetSelection()},T=d=>{e.totalSelectedProducts>0&&k("stage3"),b.value="",e.setQuery(""),d()};return q(()=>e.query,d=>{b.value=d}),A(()=>{e.updatePriceRange()}),(d,l)=>{const B=R,i=j,E=K,v=O,z=Z,D=G,I=H;return y(),w(I,{modelValue:t(m).dbc_category_drawer,"onUpdate:modelValue":l[5]||(l[5]=o=>t(m).dbc_category_drawer=o),direction:"btt",size:"100%","before-close":T},{header:s(()=>{var o;return[r("div",ee,[r("div",te,[a(B,{disabled:(o=t(e))==null?void 0:o.isLoading,class:"mr-2",modelValue:t(e).query,"onUpdate:modelValue":l[0]||(l[0]=c=>t(e).query=c),size:"large",placeholder:"Поиск категорий, подкатегорий или товаров","suffix-icon":t(Q),onInput:t(e).setQuery},null,8,["disabled","modelValue","suffix-icon","onInput"]),a(E,{value:t(e).activeFiltersCount,hidden:t(e).activeFiltersCount===0,class:"item"},{default:s(()=>{var c;return[a(i,{disabled:(c=t(e))==null?void 0:c.isLoading,onClick:l[1]||(l[1]=ie=>f.value=!t(f)),plain:"",icon:"Filter",size:"large"},null,8,["disabled"])]}),_:1},8,["value","hidden"])])])]}),footer:s(()=>{var o;return[a(i,{plain:"",size:"large",style:{display:"block",width:"100%","margin-bottom":"10px"},onClick:x,disabled:(o=t(e))==null?void 0:o.isLoading},{default:s(()=>[r("span",null,"Выбрано "+_(t(e).totalSelectedProducts)+" / "+_(t(e).filteredProductCount),1)]),_:1},8,["disabled"]),r("div",le,[t(e).hasActiveFilters?(y(),w(z,{key:0,direction:"vertical",alignment:"start",size:10,style:{width:"100%"}},{default:s(()=>[a(v,{type:t(V),class:""},{default:s(()=>[p(_(t(F)),1)]),_:1},8,["type"]),a(v,{type:t(C),class:""},{default:s(()=>[p(_(t(S)),1)]),_:1},8,["type"])]),_:1})):h("",!0),a(i,{type:"success",plain:"",size:"large",disabled:t(e).totalSelectedProducts<=0,onClick:l[2]||(l[2]=c=>n.value=!0)},{default:s(()=>[oe]),_:1},8,["disabled"]),a(i,{type:"danger",plain:"",size:"large",disabled:t(e).totalSelectedProducts===0&&!t(e).hasActiveFilters,onClick:t(e).resetSelection},{default:s(()=>[re]),_:1},8,["disabled","onClick"])])]}),default:s(()=>[r("div",se,[a(U,{name:"slide-fade"},{default:s(()=>[t(f)?(y(),$("div",ae,[a(X)])):h("",!0)]),_:1}),a(W)]),a(D,{modelValue:t(n),"onUpdate:modelValue":l[4]||(l[4]=o=>M(n)?n.value=o:null),title:"Сводка товаров для загрузки",width:"100%"},{footer:s(()=>[r("span",ne,[a(i,{onClick:l[3]||(l[3]=o=>n.value=!1)},{default:s(()=>[p("Отмена")]),_:1}),a(i,{type:"primary",onClick:P},{default:s(()=>[p("Подтвердить")]),_:1})])]),default:s(()=>[a(Y)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}});export{ve as _};
