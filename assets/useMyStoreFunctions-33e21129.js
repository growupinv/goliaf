import{u as f}from"./useMyStoreStats-6b9c8885.js";import{$ as b,r as p,G as h}from"./index-ff671c6d.js";const r=b(),v=p(null),e=h({series:[],options:{legend:{show:!1},chart:{type:"bar",margin:{top:20,bottom:20},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},title:{text:"Статистика",align:"center",floating:!0,style:{color:r.value?"#fff":"rgba(0,0,0,0.64)"}},plotOptions:{bar:{barHeight:"100%",distributed:!0,horizontal:!0,dataLabels:{position:"bottom"}}},colors:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B","#2b908f","#f9a3a4","#90ee7e","#f48024","#69d2e7"],dataLabels:{enabled:!0,textAnchor:"start",style:{colors:r.value?["#fff"]:["rgba(0,0,0,0.64)"]},formatter:function(a,i){return i.w.globals.labels[i.dataPointIndex]+":  "+a},offsetX:0,dropShadow:{enabled:!1}},stroke:{show:!0,dashArray:0,width:1,colors:["#fff"]},xaxis:{categories:[]},yaxis:{labels:{show:!1}},tooltip:{theme:r.value?"dark":"light",x:{show:!1},y:{title:{formatter:function(){return""}}}}}}),x=a=>{e.options.dataLabels.style.colors=r.value?["#fff"]:["rgba(0,0,0,0.64)"],e.options.title.style.color=r.value?"#fff":"rgba(0,0,0,0.64)",e.options.tooltip.theme=r.value?"dark":"light",a.value&&a.value.chart&&a.value.chart.updateOptions(e.options)},w=(a,i,m,n)=>{const s=f();if(s.mystoreStats&&s.mystoreStats[a]&&s.mystoreStats[a].cards_stats){const d=s.mystoreStats[a],c={};d.cards_stats.forEach(t=>{if(t&&t.object&&t.object.name&&t.statistics&&t.statistics.selectedPeriod){const o=t.object.name;let l=0;switch(i){case"openCardCount":l=t.statistics.selectedPeriod.openCardCount||0;break;case"addToCartCount":l=t.statistics.selectedPeriod.addToCartCount||0;break;case"ordersCount":l=t.statistics.selectedPeriod.ordersCount||0;break}c[o]=(c[o]||0)+l}});const u=Object.entries(c).map(([t,o])=>({category:t,value:o})).sort((t,o)=>o.value-t.value);e.series=[{name:s.chartTitle,data:u.map(t=>t.value)}],e.options.xaxis.categories=u.map(t=>t.category),e.options.title.text=s.chartTitle,n.value&&n.value.chart?n.value.chart.updateOptions({series:e.series,xaxis:{categories:e.options.xaxis.categories},title:{text:e.options.title.text}}):console.warn("Chart reference is not available")}else console.warn("Store stats or cards_stats are not available")};export{x as changeTheme,v as chart,e as chartData,w as updateChartData};
