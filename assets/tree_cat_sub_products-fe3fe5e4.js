import{d as C,r as I,c as F,a1 as q,o as T,g as c,b as l,f as o,m as u,w as n,h as p,e as a,aP as V,aQ as S,q as B,F as i,s as d,t as s,i as E,aR as N,aS as P,_ as R}from"./index-ff671c6d.js";/* empty css                 *//* empty css                     */import{_ as A}from"./CubeOverlay-af736554.js";import{useTreeStore as D}from"./treeStore-474ae5e3.js";import"./usePartnerStore-c5291516.js";const U={class:"tree-container"},$=["onClick"],z={class:"image-placeholder"},K={class:"image-placeholder"},L=C({__name:"tree_cat_sub_products",setup(M){const r=D(),_=I(null),f={children:"children",label:"label"},g=(t,{checkedKeys:m})=>{r.handleCheck(m,t)};F(()=>{switch(r.skladFilter){case"мск":return"МСК";case"спб":return"СПБ";default:return"Все"}});const k=t=>t!==void 0?`${t.toFixed(2)} ₽`:"Цена не указана",y=t=>{},v=t=>t.product_img_url?r.getFullImageUrl(t.product_img_url):"";return q(()=>r.selectedItems,t=>{_.value&&_.value.setCheckedKeys(Array.from(t))},{deep:!0}),T(()=>{r.setTreeRef(_.value)}),(t,m)=>{const b=A,h=E,x=N,w=P;return c(),l("div",U,[o(r).isLoading?(c(),u(b,{key:0})):(c(),u(w,{key:1,ref_key:"treeRef",ref:_,style:{width:"100%"},data:o(r).filteredTreeData,props:f,height:800,"show-checkbox":"","node-key":"id","check-strictly":!0,onCheck:g,"empty-text":"Совпадений не найдено!"},{default:n(({node:Q,data:e})=>[p("span",{onClick:j=>y(e)},[e.product_img_url?(c(),u(x,{key:0,style:{width:"30px",height:"30px","margin-right":"5px","vertical-align":"middle"},src:v(e),"preview-src-list":e.isProduct?[o(r).getFullImageUrl(e.product_img_url)]:[],"initial-index":0,fit:"cover","preview-teleported":!0,lazy:""},{placeholder:n(()=>[p("div",z,[a(h,null,{default:n(()=>[a(o(V))]),_:1})])]),error:n(()=>[p("div",K,[a(h,null,{default:n(()=>[a(o(S))]),_:1})])]),_:2},1032,["src","preview-src-list"])):B("",!0),e.isProduct?(c(),l(i,{key:1},[d(s(k(e.price))+" | "+s(e.label),1)],64)):(c(),l(i,{key:2},[d(s(e.label)+" ",1),o(r).hasActiveFilters&&e.filtered_qnt!==e.qnt_products?(c(),l(i,{key:0},[d(" ("+s(e.filtered_qnt)+" / "+s(e.qnt_products)+") ",1)],64)):(c(),l(i,{key:1},[d(" ("+s(e.qnt_products)+") ",1)],64))],64))],8,$)]),_:1},8,["data"]))])}}});const Y=R(L,[["__scopeId","data-v-d8e8bb8c"]]);export{Y as default};
