import{d as ee,u as te,a as se,r as c,c as v,o as oe,H as ae,g as d,b as R,e,w as t,h as l,f as s,i as u,j as z,m as T,k as m,s as r,t as i,q as b,ad as ne,ae as le,aa as ce,ab as re,I as ie,af as de,ag as ue,D as me,y as _e,C as pe,z as ge,O as fe,A as ve,B as be,_ as ye}from"./index-ff671c6d.js";/* empty css               *//* empty css             *//* empty css            *//* empty css                 *//* empty css                          *//* empty css               *//* empty css             */import{Descriptions as w}from"./descriptions-ff3371ae.js";import Se from"./AnimatedRecommendationLoader-eb743ce3.js";import{_ as xe}from"./dbc_category_drawer.vue_vue_type_script_setup_true_lang-5a0284c3.js";import{useRecommendations as he}from"./UseRecommendations-4e9f8c96.js";import{N as Ce}from"./NavBar-fa151205.js";import{_ as Re}from"./SelectMyStores.vue_vue_type_script_setup_true_lang-9c8688a8.js";/* empty css              *//* empty css            *//* empty css               *//* empty css               */import"./useMyStoreStats-6b9c8885.js";const y=_=>(ve("data-v-68e9b68a"),_=_(),be(),_),we={style:{width:"100%","justify-content":"space-around",display:"flex","flex-direction":"column","align-items":"center"}},ke={class:"flex items-center space-x-2"},De={key:2,class:"mobile-container"},Ee={class:"card-header"},Ie=y(()=>l("span",null,"Выбрано",-1)),Be=y(()=>l("span",null,"Категорий",-1)),Ne=y(()=>l("span",null,"Товаров",-1)),Ve=y(()=>l("span",null,"Время",-1)),ze={class:"percentage-value text-xs"},Te={class:"percentage-label text-xs"},$e={key:3},Ae=["innerHTML"],Me={class:"dialog-footer"},Pe=ee({__name:"index",setup(_){const o=te();se();const S=c(!1),k=c(!1),D=c(!1),p=c(!1),{searchQueryCatButtons:Ge,filters:je,filteredCategories:He,totalProducts:Le,totalSelectedProducts:$,toggleSelection:qe,resetSelection:Fe,categories:Oe,selectAllCategories:Qe,totalSelectedCategories:A,processingTime:M}=he();c(10),c(0),c(!1);const g=c(0);c(!1);const P=[{color:"#e2786f",percentage:5},{color:"#e0665c",percentage:10},{color:"#de5252",percentage:15},{color:"#d93c3c",percentage:20},{color:"#d63b3b",percentage:25},{color:"#cf3434",percentage:30},{color:"#c93838",percentage:35},{color:"#c53b3b",percentage:40},{color:"#bf3f3f",percentage:45},{color:"#bc4545",percentage:50},{color:"#b86464",percentage:55},{color:"#b47878",percentage:60},{color:"#8bc34a",percentage:65},{color:"#7cb342",percentage:70},{color:"#6bc06b",percentage:75},{color:"#5cb87a",percentage:80},{color:"#4caf50",percentage:85},{color:"#3e8e41",percentage:90},{color:"#2e865f",percentage:95},{color:"#1e744f",percentage:100}],G=async()=>{await o.GetDataByCategoryes()},j=async()=>{S.value=!1,await o.SetRecommendations()},f=c(!1),E=v(()=>o.statusRecommendations!=="dbc_received"&&o.statusRecommendations!=="GetStatisticsForNMIDs"&&o.statusRecommendations!=="SettingRecommendations"&&o.statusRecommendations!=="success"),I=v(()=>o.statusRecommendations==="dbc_received");v(()=>o.statusRecommendations==="SettingRecommendations"&&o.statusRecommendations!="success");const H=v(()=>{if(o.statusRecommendations==="success")return g.value=2,!0}),L=()=>{g.value=1,o.statusRecommendations="dbc_received",o.dbc_category_drawer=!0,o.progressRecommendation=0},q=()=>{f.value=!0,D.value=!1,g.value=1,console.log("stage3"),S.value=!0;let B=setInterval(()=>{k.value=!k.value},500);setTimeout(()=>{clearInterval(B),S.value=!1},5e3)},F=()=>{console.log("notselected"),D.value=!0},O=()=>{if(E)return w.stage1;if(I)return w.stage2;if(f)return w.stage3},Q=async()=>{await o.GetMyStores(o.currentPage,50)};return oe(()=>{Q()}),(B,a)=>{const N=ce,U=re,x=ie,h=de,J=ae("Timer"),K=ue,V=me,W=_e,X=pe,Y=ge,Z=fe;return d(),R("div",we,[e(Ce,{title:"Рекомендации"},{right:t(()=>[l("div",ke,[e(s(u),{onClick:a[0]||(a[0]=()=>{}),size:"32",color:"warning"},{default:t(()=>[e(s(z))]),_:1})])]),_:1}),e(xe,{onNotSelected:F,onStage3:q}),e(U,{class:"w80 mt6 small-text",active:g.value,"align-center":"","finish-status":"success"},{default:t(()=>[e(N,{title:"Подбор",description:""}),e(N,{title:"Назначение",description:""})]),_:1},8,["active"]),s(E)?(d(),T(x,{key:0,title:"Запустите подбор рекомендаций"},{icon:t(()=>[e(s(u),{onClick:a[1]||(a[1]=n=>p.value=!0),size:"64"},{default:t(()=>[e(s(z))]),_:1})]),extra:t(()=>{var n;return[e(Re,{class:"mb-6"}),e(s(m),{loading:s(o).dbc_loading,class:"w50 ml-6 mr6",size:"large",disabled:((n=s(o))==null?void 0:n.selectedId)===null,type:"primary",onClick:G},{default:t(()=>[r(i(s(o).dbc_loading?"Подготовка":"СТАРТ"),1)]),_:1},8,["loading","disabled"])]}),_:1})):b("",!0),s(I)&&!f.value?(d(),T(x,{key:1,icon:"info",title:"Категории проанализированы, сделайте выбор"},{extra:t(()=>[e(s(m),{class:"w50 ml-6 mr6",size:"large",type:"primary",onClick:a[2]||(a[2]=n=>s(o).dbc_category_drawer=!0)},{default:t(()=>[r(" ПОКАЗАТЬ КАТЕГОРИИ ")]),_:1})]),_:1})):b("",!0),f.value&&s(o).statusRecommendations!=="success"?(d(),R("div",De,[e(Y,{class:"stats-card"},{header:t(()=>[l("div",Ee,[Ie,e(s(m),{onClick:a[3]||(a[3]=n=>s(o).dbc_category_drawer=!0),class:"back-button",type:"primary"},{default:t(()=>[r("назад ")]),_:1})])]),default:t(()=>[e(X,{gutter:10},{default:t(()=>[e(V,{span:14},{default:t(()=>[e(K,{column:1,size:"small",border:!1},{default:t(()=>[e(h,null,{label:t(()=>[e(s(u),{class:"mr-1"},{default:t(()=>[e(s(ne))]),_:1}),Be]),default:t(()=>[r(" "+i(s(A)),1)]),_:1}),e(h,null,{label:t(()=>[e(s(u),{class:"mr-1"},{default:t(()=>[e(s(le))]),_:1}),Ne]),default:t(()=>[r(" "+i(s($)),1)]),_:1}),e(h,null,{label:t(()=>[e(s(u),{class:"mr-1"},{default:t(()=>[e(J)]),_:1}),Ve]),default:t(()=>[r(" "+i(s(M))+" мин ",1)]),_:1})]),_:1})]),_:1}),e(V,{span:10},{default:t(()=>{var n;return[l("div",{class:"flex justify-center items-center h-full",onClick:j},[e(W,{type:"dashboard",percentage:(n=s(o))==null?void 0:n.progressRecommendation,color:P,width:100},{default:t(({percentage:C})=>[l("span",ze,i(C===0&&!s(o).dbc_loading?"ПУСК":`${C}%`),1),l("span",Te,i(C===0&&!s(o).dbc_loading?"":"Progressing"),1)]),_:1},8,["percentage"])])]}),_:1})]),_:1})]),_:1}),e(Se)])):b("",!0),s(H)?(d(),R("div",$e,[e(x,{icon:"success",title:"Рекомендации завершены","sub-title":"Все выбранные товары обработаны, и рекомендации назначены"},{extra:t(()=>[e(s(m),{class:"w50 ml-6 mr6",size:"large",onClick:L,type:"primary"},{default:t(()=>[r("НАЗНАЧИТЬ ЕЩЕ ")]),_:1})]),_:1})])):b("",!0),e(Z,{modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=n=>p.value=n),title:"Памятка",width:"500","align-center":""},{footer:t(()=>[l("div",Me,[e(s(m),{type:"primary",onClick:a[4]||(a[4]=n=>p.value=!1)},{default:t(()=>[r(" Понятно ")]),_:1})])]),default:t(()=>[l("div",{innerHTML:O(),style:{"text-align":"left"}},null,8,Ae)]),_:1},8,["modelValue"])])}}});const mt=ye(Pe,[["__scopeId","data-v-68e9b68a"]]);export{mt as default};
